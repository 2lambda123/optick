#pragma once
#include "Types.h"
#include "Brofiler.h"
#include "MemoryPool.h"
#include "Serialization.h"


namespace Brofiler
{
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	struct SysCallData : EventData
	{
		uint64 id;
		uint64 threadID;
	};
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	OutputDataStream &operator << (OutputDataStream &stream, const SysCallData &ob);
	//////////////////////////////////////////////////////////////////////////
	class SysCallCollector
	{
		typedef MemoryPool<SysCallData, 1024 * 32> SysCallPool;
	public:
		SysCallPool syscallPool;

		SysCallData& Add();
		void Clear();

		bool Serialize(OutputDataStream& stream);
	};
	//////////////////////////////////////////////////////////////////////////
}